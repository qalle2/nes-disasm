clear
rm -f test-out/*.asm test-out/*.bin

echo "=== all-instructions.prg (disassemble, reassemble, verify) ==="
python3 nesdisasm.py test-in/all-instructions.prg > test-out/all-instructions.asm
asm6f test-out/all-instructions.asm test-out/all-instructions.bin
diff test-in/all-instructions.prg test-out/all-instructions.bin
echo

echo "=== Excitebike (disassemble, reassemble, verify) ==="
python3 nesdisasm.py --no-brk --no-indirect-x --no-access --no-register-execute --no-rom-write test-in/excitebike.prg > test-out/excitebike.asm
asm6f test-out/excitebike.asm test-out/excitebike.bin
diff test-in/excitebike.prg test-out/excitebike.bin
echo

echo "=== SMB (disassemble, reassemble, verify) ==="
python3 nesdisasm.py --no-brk --no-indirect-x --no-access --no-register-execute --no-rom-write test-in/smb.prg > test-out/smb.asm
asm6f test-out/smb.asm test-out/smb.bin
diff test-in/smb.prg test-out/smb.bin
echo

echo "=== Blaster Master (disassemble, reassemble, verify) ==="
python3 nesdisasm.py --bank-size 16384 --no-brk --no-indirect-x --no-access --no-register-execute test-in/blastermaster.prg > test-out/blastermaster.asm
asm6f test-out/blastermaster.asm test-out/blastermaster.bin
diff test-in/blastermaster.prg test-out/blastermaster.bin
echo

